/*
 jsModal - A pure JavaScript modal dialog engine v1.0d
 http://jsmodal.com/

 Author: Henry Rune Tang Kai <henry@henrys.se>

 (c) Copyright 2013 Henry Tang Kai.

 License: http://www.opensource.org/licenses/mit-license.php

 Date: 2013-7-11

 Modified by Akeeba Ltd:
 - [Oct 2016] Prefix "akeeba-modal-" instead of generic "modal-" to avoid conflicts with 3PD software e.g. Bootstrap.
 - [Oct 2016] Remove support for AJAX content. We use our own AJAX handlers which work around 3PD plugins corrupting content.
 ? [Oct 2016] Added method show() which just calls open() for backwards compatibility reasons.
 ? [Oct 2016] Added parameter "inherit" where you can give a query selector for an element whose content will be inherited by the modal.
 ? [Oct 2016] open() returns the Modal object so that we can interact with it through external code.
 ? [Nov 2016] Added parameter "iframe" where you can give a URL to load inside an IFRAME.
*/
if("undefined"==typeof akeeba)var akeeba={};
"undefined"==typeof akeeba.Modal&&(akeeba.Modal=function(){var d={},b={},e=document.createElement("div"),c=document.createElement("div"),h=document.createElement("div"),f=document.createElement("div"),l=document.createElement("div"),k=null,m,n;d.show=function(a){try{console.log("Using akeeba.Modal.show() is deprecated. Use .open() instead.")}catch(g){}return d.open(a)};d.open=function(a){b.width=a.width||"auto";b.height=a.height||"auto";b.lock=a.lock||!1;b.hideClose=a.hideClose||!1;b.draggable=a.draggable||
!1;b.closeAfter=a.closeAfter||0;b.closeCallback=a.closeCallback||!1;b.openCallback=a.openCallback||!1;b.hideOverlay=a.hideOverlay||!1;m=function(){d.center({})};f.innerHTML="";var g=null;if(a.content)f.innerHTML=a.content;else if(a.inherit){if(g=a.inherit,"string"==typeof a.inherit&&(g=window.document.querySelector(a.inherit)),null!=g&&g.innerHTML)for(k=g;0<k.childNodes.length;)f.appendChild(k.childNodes[0])}else a.iframe&&(g=window.document.createElement("iframe"),g.setAttribute("src",a.iframe),
g.setAttribute("width",a.width),g.setAttribute("height",a.height),g.setAttribute("frameborder",0),g.setAttribute("marginheight",0),g.setAttribute("marginwidth",0),f.appendChild(g));c.style.width=b.width;c.style.height=b.height;d.center({});if(b.lock||b.hideClose)l.style.visibility="hidden";b.hideOverlay||(e.style.visibility="visible");c.style.visibility="visible";document.onkeypress=function(a){27===a.keyCode&&!0!==b.lock&&d.close()};l.onclick=function(){if(b.hideClose)return!1;d.close()};e.onclick=
function(){if(b.lock)return!1;d.close()};window.addEventListener?window.addEventListener("resize",m,!1):window.attachEvent&&window.attachEvent("onresize",m);b.draggable?(h.style.cursor="move",h.onmousedown=function(a){d.drag(a);return!1}):h.onmousedown=function(){return!1};0<b.closeAfter&&(n=window.setTimeout(function(){d.close()},1E3*b.closeAfter));b.openCallback&&b.openCallback();return this};d.drag=function(a){var b=void 0!==window.event?window.event.clientX:a.clientX,d=void 0!==window.event?window.event.clientY:
a.clientY,e=b-c.offsetLeft,f=d-c.offsetTop;document.onmousemove=function(a){b=void 0!==window.event?window.event.clientX:a.clientX;d=void 0!==window.event?window.event.clientY:a.clientY;c.style.left=0<b-e?b-e+"px":0;c.style.top=0<d-f?d-f+"px":0;document.onmouseup=function(){window.document.onmousemove=null}}};d.close=function(){if(!empty(k)){for(;0<f.childNodes.length;)k.appendChild(f.childNodes[0]);k=null}f.innerHTML="";e.setAttribute("style","");e.style.cssText="";e.style.visibility="hidden";c.setAttribute("style",
"");c.style.cssText="";c.style.visibility="hidden";h.style.cursor="default";l.setAttribute("style","");l.style.cssText="";n&&window.clearTimeout(n);b.closeCallback&&b.closeCallback();window.removeEventListener?window.removeEventListener("resize",m,!1):window.detachEvent&&window.detachEvent("onresize",m)};d.center=function(a){var b=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),d=Math.max(c.clientWidth,c.offsetWidth),f=Math.max(c.clientHeight,c.offsetHeight),h=0,l=0,k=0,
m=0;"number"===typeof window.innerWidth?(h=window.innerWidth,l=window.innerHeight):document.documentElement&&document.documentElement.clientWidth&&(h=document.documentElement.clientWidth,l=document.documentElement.clientHeight);"number"===typeof window.pageYOffset?(m=window.pageYOffset,k=window.pageXOffset):document.body&&document.body.scrollLeft?(m=document.body.scrollTop,k=document.body.scrollLeft):document.documentElement&&document.documentElement.scrollLeft&&(m=document.documentElement.scrollTop,
k=document.documentElement.scrollLeft);a.horizontalOnly||(c.style.top=m+l/2-f/2+"px");c.style.left=k+h/2-d/2+"px";e.style.height=b+"px";e.style.width="100%"};e.setAttribute("id","akeeba-modal-overlay");c.setAttribute("id","akeeba-modal-container");h.setAttribute("id","akeeba-modal-header");f.setAttribute("id","akeeba-modal-content");l.setAttribute("id","akeeba-modal-close");h.appendChild(l);c.appendChild(h);c.appendChild(f);e.style.visibility="hidden";c.style.visibility="hidden";window.addEventListener?
window.addEventListener("load",function(){document.body.appendChild(e);document.body.appendChild(c)},!1):window.attachEvent&&window.attachEvent("onload",function(){document.body.appendChild(e);document.body.appendChild(c)});return d}());
